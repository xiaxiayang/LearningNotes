
> ç¬”è®°å†…å®¹æ¥è‡ª **æ‰”ç‰©çº¿** çš„ https://kaixue.io/kotlin-basic-3/
###  æ„é€ å™¨

```
class User(val name: String, val id: String) {
    init {
        ...
    }
}
```
ä¸Šè¿°ä»£ç å¯åˆ†è§£ï¼ˆæ‰§è¡Œé¡ºåºä¸ºï¼‰ä¸ºï¼š
- åˆ›å»ºä¸€ä¸ª User ç±»
- æ·»åŠ ä¸€ä¸ªå‚æ•°ä¸º name å’Œ id çš„ä¸»æ„é€ å™¨(ç›´æ¥å†™åœ¨ç±»ååé¢ï¼Œä¸éœ€è¦æ·»åŠ  constructor å…³é”®å­—ï¼Œä¸”åªèƒ½æœ‰ä¸€ä¸ª)
- é€šè¿‡ var æˆ–è€… val å°†ä¸»æ„é€ å™¨ä¸­çš„å‚æ•°å£°æ˜ä¸ºç±»çš„å±æ€§
- åœ¨ init ä»£ç å—ä¸­æ·»åŠ ä¸€äº›åˆå§‹åŒ–é€»è¾‘
- æ·»åŠ æ¬¡æ„é€ å™¨(æ¬¡æ„é€ å™¨éœ€è¦æ·»åŠ  constructor å…³é”®å­—ï¼Œä¸”ç”¨ `:` è¡¨æ˜ä¸ä¸»æ„é€ å™¨çš„ä¾èµ–å…³ç³»ï¼Œå¯ä»¥æœ‰å¤šä¸ª)


### å‡½æ•°ç®€åŒ–
#### 1ã€ä½¿ç”¨ `=` è¿æ¥è¿”å›å€¼
å¯¹äºå¦‚ä¸‹å‡½æ•°ä½“åªæœ‰ä¸€è¡Œä»£ç çš„å‡½æ•°ï¼š
```
fun area(width: Int, height: Int): Int {
    return width * height
}
```
å¯ä»¥ç®€å†™ä¸ºï¼š
```
fun area(width: Int, height: Int): Int = width * height

```
å…¶ä¸­ç”±äºâ€ç±»å‹æ¨æ–­â€œçš„ç‰¹æ€§ï¼Œè¿”å›å€¼ç±»å‹å¯çœç•¥
#### 2ã€å‚æ•°é»˜è®¤å€¼
å‚æ•°è®¾ç½®é»˜è®¤å€¼æ—¶ï¼Œå¦‚æœä¼ å‚çš„æ—¶å€™ä¸ä¼ å°±ä½¿ç”¨é»˜è®¤å€¼ã€‚å¯æ˜¯ç®€åŒ– Java ä¸­æ–¹æ³•é‡è½½çš„åŠŸèƒ½
```
fun sayHi(name: String = "world") = println("Hi " + name)
```
è°ƒç”¨æ—¶ï¼š
```
//è°ƒç”¨
sayHi("kaixue.io")
sayHi() // ä½¿ç”¨äº†é»˜è®¤å€¼ "world"
```
#### 3ã€å‘½åå‚æ•°
æ¯ä¸€ä¸ªå‡½æ•°å‚æ•°éƒ½å¯ä»¥ä½œä¸ºå‘½åå‚æ•°
```
fun sayHi(name: String = "world", age: Int, isStudent: Boolean = true, isFat: Boolean = true, isTall: Boolean = true) {
    ...
}
```
è°ƒç”¨æ—¶ï¼š
```
sayHi(name = "wo", age = 21, isStudent = false, isFat = true, isTall = false)

```
#### 4ã€åµŒå¥—å‡½æ•°

åµŒå¥—å‡½æ•°ï¼Œå…¶ä»–æ–¹æ³•ä¸èƒ½è®¿é—®
```
fun login(user: String, password: String, illegalStr: String) {
    //åµŒå¥—å‡½æ•°
    fun validate(value: String) {
        if (value.isEmpty()) {
                                              ğŸ‘‡
            throw IllegalArgumentException(illegalStr)
        }
    }
    ...
}
```

### å­—ç¬¦ä¸²
#### 1ã€å­—ç¬¦ä¸²æ¨¡æ¿
ç”¨ `$` åŠ å‚æ•°æˆ–è€…è¡¨è¾¾å¼( éœ€è¦ç”¨{}åŒ…èµ·æ¥ )çš„æ–¹æ³•
```
val name = "world"
println("Hi $name")
println("Hi ${name.length}")
```
#### 2ã€åŸç”Ÿå­—ç¬¦ä¸²
ç”¨ä¸€å¯¹ `"""` å°†å­—ç¬¦ä¸²æ‹¬èµ·æ¥,**ä½¿è¾“å‡ºçš„å†…å®¹ä¸å†™çš„å†…å®¹å®Œå…¨ä¸€è‡´(`$`ä¾ç„¶ç”Ÿæ•ˆ)**

å¯ä»¥é€šè¿‡`trimMargin()`å»æ‰æ¯è¡Œå‰é¢çš„ç©ºæ ¼
```
val name = "world"
val myName = "kotlin"
           ğŸ‘‡
val text = """
      Hi $name!
    My name is $myName.\n
""".trimMargin()
println(text)
```
è¾“å‡ºç»“æœï¼š
```
Hi world!
My name is kotlin.\n
```
å…¶ä¸­å¯¹äº `trimMargin()` å‡½æ•°ï¼š
- `|` ç¬¦å·ä¸ºé»˜è®¤çš„è¾¹ç•Œå‰ç¼€ï¼Œå‰é¢åªèƒ½æœ‰ç©ºæ ¼ï¼Œå¦åˆ™ä¸ä¼šç”Ÿæ•ˆ
- è¾“å‡ºæ—¶ `|` ç¬¦å·ä»¥åŠå®ƒå‰é¢çš„ç©ºæ ¼éƒ½ä¼šè¢«åˆ é™¤
- è¾¹ç•Œå‰ç¼€è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–å­—ç¬¦ï¼Œæ¯”å¦‚ `trimMargin("/")`ï¼Œåªä¸è¿‡ä¸Šæ–¹çš„ä»£ç ä½¿ç”¨çš„æ˜¯å‚æ•°é»˜è®¤å€¼çš„è°ƒç”¨æ–¹å¼

### æ•°ç»„å’Œé›†åˆ
#### 1ã€æ•°ç»„ä¸é›†åˆçš„æ“ä½œç¬¦
| æ“ä½œç¬¦|æè¿° |
| ------ | ------ |
|  `forEach`| éå†æ¯ä¸€ä¸ªå…ƒç´ |
|  `filter`|  å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œè¿‡æ»¤æ“ä½œï¼Œç¬¦åˆæ¡ä»¶çš„ç•™ä¸‹ï¼Œæœ€ç»ˆç”Ÿæˆä¸€ä¸ªæ–°çš„é›†åˆ  |
|  `map`| éå†æ¯ä¸ªå…ƒç´ ï¼Œå¹¶æ‰§è¡Œç»™å®šçš„è¡¨è¾¾å¼ï¼Œæœ€ç»ˆå½¢æˆæ–°çš„é›†åˆ|
|  `flatMap`|  éå†æ¯ä¸ªå…ƒç´ ï¼Œå¹¶ä¸ºæ¯ä¸ªå…ƒç´ åˆ›å»ºæ–°çš„é›†åˆï¼Œæœ€ç»ˆåˆå¹¶åˆ°ä¸€ä¸ªé›†åˆ  |

ä¾‹å­ï¼š
- `forEach` :
```
val intArray = intArrayOf(1, 2, 3)
//              ğŸ‘‡ lambda è¡¨è¾¾å¼ï¼Œi è¡¨ç¤ºæ•°ç»„çš„æ¯ä¸ªå…ƒç´ 
intArray.forEach { i ->
    print(i + " ")
}
// è¾“å‡ºï¼š1 2 3
```
- `filter`:
```
val intArray = intArrayOf(1, 2, 3)
val newList: List = intArray.filter { i ->
    i != 1 // ğŸ‘ˆ è¿‡æ»¤æ‰æ•°ç»„ä¸­ç­‰äº 1 çš„å…ƒç´ 
}
```
- `map`:
```
//  [1, 2, 3]
//  {2, 3, 4}
val newList: List = intArray.map { i ->
    i + 1 // ğŸ‘ˆ æ¯ä¸ªå…ƒç´ åŠ  1
}
```
- `flatMap`:
```
// [1, 2, 3 ]     
// {"2", "a" , "3", "a", "4", "a"}
intArray.flatMap { i ->
    listOf("${i + 1}", "a") // ğŸ‘ˆ ç”Ÿæˆæ–°é›†åˆ
}
```

#### 2ã€`Range`
| æ–¹æ³•|æè¿° |ä¾‹å­ |
| ------ | ------ |------ |
|  `IntRange`| ç”Ÿæˆä¸€ä¸ªèŒƒå›´ï¼Œintå‹|``` val range: IntRange = 0..1000(åŒ…å«1000) /val range: IntRange = 0 until 1000 (ä¸åŒ…å«1000) ``` |
|  `CharRange`|  ç”Ÿæˆä¸€ä¸ªèŒƒå›´ï¼Œcharå‹  |```val range :CharArray = charArrayOf('a','b', 'c','1')``` |
|  `LongRange`| ç”Ÿæˆä¸€ä¸ªèŒƒå›´ï¼Œlong å‹|``` val range :LongArray = longArrayOf(1,2,3)```|
|  `step`| è®¾ç½®æ­¥é•¿ï¼Œé»˜è®¤å€¼ä¸º 1|```for (i in range step 2) {print("$i, ")}``` |
|  `downTo`| é€’å‡åŒºé—´|```for (i in 4 downTo 1) {    print("$i, ")}``` |

#### 3ã€`Sequence`
åºåˆ— `Sequence` åˆè¢«ç§°ä¸ºã€Œæƒ°æ€§é›†åˆæ“ä½œã€
```
val sequence = sequenceOf(1, 2, 3, 4)
val result: List = sequence
    .map { i ->
        println("Map $i")
        i * 2
    }
    .filter { i ->
        println("Filter $i")
        i % 3  == 0
    }
ğŸ‘‡
println(result.first())
```
æƒ°æ€§çš„æ¦‚å¿µé¦–å…ˆå°±æ˜¯è¯´åœ¨ã€ŒğŸ‘‡ã€æ ‡æ³¨ä¹‹å‰çš„ä»£ç è¿è¡Œæ—¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œå®ƒåªæ˜¯å®šä¹‰äº†ä¸€ä¸ªæ‰§è¡Œæµç¨‹ï¼Œåªæœ‰ result è¢«ä½¿ç”¨åˆ°çš„æ—¶å€™æ‰ä¼šæ‰§è¡Œ

 println æ‰§è¡Œæ—¶æ•°æ®å¤„ç†æµç¨‹ï¼š

- å–å‡ºå…ƒç´  1 -> map ä¸º 2 -> filter åˆ¤æ–­ 2 æ˜¯å¦èƒ½è¢« 3 æ•´é™¤
- å–å‡ºå…ƒç´  2 -> map ä¸º 4 -> filter åˆ¤æ–­ 4 æ˜¯å¦èƒ½è¢« 3 æ•´é™¤
...

æƒ°æ€§æŒ‡å½“å‡ºç°æ»¡è¶³æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æ—¶å€™ï¼ŒSequence å°±ä¸ä¼šæ‰§è¡Œåé¢çš„å…ƒç´ éå†äº†ï¼Œå³è·³è¿‡äº† 4 çš„éå†ã€‚è€Œ List æ˜¯æ²¡æœ‰æƒ°æ€§çš„ç‰¹æ€§çš„.

### æ¡ä»¶æ§åˆ¶
#### 1ã€if/else
`if` è¯­å¥å¯ä»¥ä½œä¸ºä¸€ä¸ªè¡¨è¾¾å¼èµ‹å€¼ç»™å˜é‡
```
val max = if (a > b) a else b
val max = if (a > b) {
    println("max:a")
    a // ğŸ‘ˆ è¿”å› a
} else {
    println("max:b")
    b // ğŸ‘ˆ è¿”å› b
}
```
#### 2ã€`when`
å¯¹åº” Java ä¸­çš„ `switch`
```
when (x) {
    ğŸ‘‡
    1, 2 -> print("x == 1 or x == 2")
    else -> print("else")
}
```
åœ¨ `when` è¯­å¥ä¸­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼ä½œä¸ºåˆ†æ”¯çš„åˆ¤æ–­æ¡ä»¶ï¼š
```
when (x) {
   ğŸ‘‡
    in 1..10 -> print("x åœ¨åŒºé—´ 1..10 ä¸­")
   ğŸ‘‡
    in listOf(1,2) -> print("x åœ¨é›†åˆä¸­")
   ğŸ‘‡ // not in
    !in 10..20 -> print("x ä¸åœ¨åŒºé—´ 10..20 ä¸­")
    else -> print("ä¸åœ¨ä»»ä½•åŒºé—´ä¸Š")
}
```

#### 3ã€`for`
```
val array = intArrayOf(1, 2, 3, 4)
          ğŸ‘‡
for (item in array) {
    ...
}
for (i in 0..10) {
    println(i)
}
```
#### 4ã€`try-catch`
```
try {
    ...
}
catch (e: Exception) {
    ...
}
finally {
    ...
}
```
`try-catch` è¯­å¥ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå…è®¸ä»£ç å—çš„æœ€åä¸€è¡Œä½œä¸ºè¿”å›å€¼ï¼š
```
val a: Int? = try { parseInt(input) } catch (e: NumberFormatException) { null }

```
#### 5ã€`?.` å’Œ `?:`

`?.` ä¸ºç©ºå®‰å…¨è°ƒç”¨ï¼Œå½“å¯¹è±¡éç©ºæ—¶ä¼šæ‰§è¡Œåé¢çš„è°ƒç”¨ï¼Œå¯¹è±¡ä¸ºç©ºæ—¶å°±ä¼šè¿”å› null

`?:` å·¦ä¾§ä¸ºç©ºæ—¶æ‰§è¡Œåé¢çš„è¯­å¥
```
//å·¦ä¾§è¡¨è¾¾å¼ str?.length ç»“æœä¸ºç©ºï¼Œåˆ™è¿”å›å³ä¾§çš„å€¼ -1
val length: Int = str?.length ?: -1

//éªŒè¯ user.id æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºæ—¶ return
val id = user.id ?: return
```
#### 6ã€`==` å’Œ `===`
- `==` ï¼šå¯ä»¥å¯¹åŸºæœ¬æ•°æ®ç±»å‹ä»¥åŠ String ç­‰ç±»å‹è¿›è¡Œå†…å®¹æ¯”è¾ƒï¼Œç›¸å½“äº Java ä¸­çš„ `equals`
- `===` ï¼šå¯¹å¼•ç”¨çš„å†…å­˜åœ°å€è¿›è¡Œæ¯”è¾ƒï¼Œç›¸å½“äº Java ä¸­çš„ `==`
